# Misskey Quick Share

選択したテキストや画像を右クリックでMisskeyに即座に投稿できるChrome拡張機能です。

## 機能

- 📝 **テキスト投稿**: ウェブページ上のテキストを選択して右クリックで即座に投稿
- 🖼️ **画像投稿**: 画像を選択して右クリックで即座に投稿
- 🔐 **MIAuth認証**: Misskeyの公式認証システムを使用した安全な認証
- ⚙️ **柔軟な設定**: 投稿の可視性、デフォルトタグなどをカスタマイズ可能
- 🚀 **ManifestV3対応**: 最新のChrome拡張機能仕様に準拠

## インストール方法

### 開発者モードでインストール

1. このリポジトリをクローンまたはダウンロード
```bash
git clone https://github.com/yunfie-twitter/misskey-quick-share.git
```

2. Chromeで `chrome://extensions/` を開く

3. 右上の「デベロッパーモード」を有効化

4. 「パッケージ化されていない拡張機能を読み込む」をクリック

5. ダウンロードしたフォルダを選択

## 使い方

### 初回設定

1. 拡張機能のアイコンをクリックして「設定」ボタンをクリック
2. MisskeyインスタンスのURL（例: `https://misskey.io`）を入力
3. 「MIAuthで認証」ボタンをクリック
4. Misskeyの認証ページで「許可」をクリック
5. 投稿の可視性やデフォルトタグを設定（任意）
6. 「設定を保存」をクリック

### テキストを投稿

1. ウェブページ上のテキストを選択
2. 右クリック → 「Misskeyに投稿」
3. 自動的に投稿されます！

### 画像を投稿

1. ウェブページ上の画像を右クリック
2. 「Misskeyに投稿」を選択
3. 自動的にアップロードして投稿されます！

### ポップアップから投稿

1. 拡張機能のアイコンをクリック
2. テキストエリアに投稿内容を入力
3. 可視性を選択
4. 「投稿」ボタンをクリック

## 設定項目

- **MisskeyインスタンスURL**: 投稿先のMisskeyサーバー
- **デフォルトの可視性**: 投稿時の公開範囲（公開/ホーム/フォロワー限定/ダイレクト）
- **デフォルトタグ**: すべての投稿に自動的に追加されるタグやテキスト

## アイコンについて

現在、この拡張機能にはプレースホルダーのアイコンが使用されています。以下のサイズのPNG画像を `icons/` ディレクトリに配置してください：

- `icon16.png` - 16x16ピクセル
- `icon48.png` - 48x48ピクセル
- `icon128.png` - 128x128ピクセル

## 必要な権限

- `contextMenus`: 右クリックメニューを追加するため
- `storage`: 設定とアクセストークンを保存するため
- `activeTab`: アクティブなタブの情報を取得するため
- `scripting`: コンテンツスクリプトを注入するため
- `<all_urls>`: すべてのウェブページで動作するため

## 技術仕様

- **Manifest Version**: 3
- **認証方式**: MIAuth (Misskeyの公式認証システム)
- **対応ブラウザ**: Google Chrome, Microsoft Edge, その他Chromiumベースのブラウザ

## セキュリティ

- アクセストークンは `chrome.storage.local` に安全に保存されます
- MIAuthによる公式な認証フローを使用
- 必要最小限の権限のみを要求

## トラブルシューティング

### 投稿できない

- インスタンスURLが正しいか確認してください
- 認証が完了しているか確認してください
- インスタンスが正常に動作しているか確認してください

### 画像がアップロードできない

- 画像のサイズが大きすぎる可能性があります
- Misskeyインスタンスのアップロード制限を確認してください
- ネットワーク接続を確認してください

### 認証が完了しない

- ポップアップブロッカーを無効にしてください
- 認証ページで「許可」をクリックしたか確認してください
- インスタンスURLが正しいか確認してください

## ライセンス

MIT License

## 開発者

ゆんふぃ ([@yunfie_misskey](https://twitter.com/yunfie_misskey))

## 貢献

バグ報告や機能リクエストは [Issues](https://github.com/yunfie-twitter/misskey-quick-share/issues) からお願いします。

プルリクエストも歓迎します！
